"use strict";(self.webpackChunkmarvel=self.webpackChunkmarvel||[]).push([[826],{8386:(e,s,a)=>{a.r(s),a.d(s,{default:()=>w});var r=a(6203),c=a(2791),t=a(8813),n=a(1523),i=a(2523),l=a(184);const o=e=>{let{data:s}=e;const{name:a,description:r,thumbnail:c,homepage:t,wiki:n,comics:i}=s,o=i.length?(0,l.jsx)(d,{comics:i}):(0,l.jsx)("p",{children:"Comics not found :("}),h=-1!==c.indexOf("image_not_available.jpg")?{objectFit:"unset"}:{objectFit:"cover"};return(0,l.jsxs)(l.Fragment,{children:[(0,l.jsxs)("div",{className:"char__basics",children:[(0,l.jsx)("img",{src:c,alt:a,style:h}),(0,l.jsxs)("div",{children:[(0,l.jsx)("div",{className:"char__info-name",children:a}),(0,l.jsxs)("div",{className:"char__btns",children:[(0,l.jsx)("a",{href:t,className:"button button__main",children:(0,l.jsx)("div",{className:"inner",children:"homepage"})}),(0,l.jsx)("a",{href:n,className:"button button__secondary",children:(0,l.jsx)("div",{className:"inner",children:"Wiki"})})]})]})]}),(0,l.jsx)("div",{className:"char__descr",children:r}),(0,l.jsx)("div",{className:"char__comics",children:"Comics:"}),(0,l.jsx)("ul",{className:"char__comics-list",children:o})]})},d=e=>{let{comics:s}=e;return s.map(((e,s)=>{if(s>9)return;const a=e.resourceURI.replace("http://gateway.marvel.com/v1/public/comics/","");return(0,l.jsx)("li",{className:"char__comics-item",children:(0,l.jsx)(n.rU,{to:"/comics/".concat(a),children:e.name})},s)}))},h=e=>{let{charId:s}=e;const[a,r]=(0,c.useState)(null),{process:n,getCharacterById:d,setProcess:h}=(0,t.Z)();(0,c.useEffect)((()=>{u()}),[s]);const m=e=>r(e),u=()=>{s&&d(s).then(m).then((()=>h("confirmed")))};return(0,l.jsx)("div",{className:"char__info",children:(0,i.Z)(n,o,a)})};var m=a(3394),u=a(9613),j=a(255),_=a(9295);const x=e=>{const[s,a]=(0,c.useState)([]),[n,i]=(0,c.useState)(!1),[o,d]=(0,c.useState)(210),[h,x]=(0,c.useState)(!1),{getAllCharacters:N,process:b,setProcess:p}=(0,t.Z)();(0,r.useEffect)((()=>v(o,!1)),[]);const v=function(){let e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:o;i(!(arguments.length>1&&void 0!==arguments[1])||arguments[1]),N(9,e).then(f).then((()=>p("confirmed")))},f=e=>{let s=!1;e.length<9&&(s=!0),a((s=>[...s,...e])),i(!1),d((e=>e+9)),x(s)},g=(0,c.useRef)([]),y=e=>{g.current.forEach((e=>e.classList.remove("char__item_selected"))),g.current[e].classList.add("char__item_selected"),g.current[e].focus()},k=(0,c.useMemo)((()=>((e,s,a)=>{switch(e){case"waiting":return(0,l.jsx)(m.Z,{});case"loading":return a?(0,l.jsx)(s,{}):(0,l.jsx)(m.Z,{});case"confirmed":return(0,l.jsx)(s,{});case"error":return(0,l.jsx)(u.Z,{});default:throw new Error("Unexpected process state")}})(b,(()=>(s=>{const a=(0,l.jsx)(j.Z,{component:null,timeout:500,children:s.map(((s,a)=>{const{name:r,thumbnail:c,id:t}=s,n=-1!==c.indexOf("image_not_available.jpg")?{objectFit:"unset"}:{objectFit:"cover"};return(0,l.jsx)(_.Z,{timeout:500,classNames:"item",children:(0,l.jsxs)("li",{className:"char__item",tabIndex:0,onClick:()=>{e.onUpdateChar(t),y(a)},ref:e=>g.current[a]=e,onKeyPress:s=>{" "!==s.key&&"Enter"!==s.key||(e.onUpdateChar(t),y(a))},children:[(0,l.jsx)("img",{src:c,alt:"thumbnail",style:n}),(0,l.jsx)("div",{className:"char__name",children:r})]},t)},t)}))});return(0,l.jsx)("ul",{className:"char__grid",children:a})})(s)),n)),[b]);return(0,l.jsxs)("div",{className:"char__list",children:[k,(0,l.jsx)("button",{className:"button button__main button__long",style:{display:h?"none":"block"},disabled:n,onClick:()=>v(o),children:(0,l.jsx)("div",{className:"inner",children:"load more"})})]})};var N=a(1724),b=a(5705);const p=(e,s,a)=>{switch(e){case"waiting":break;case"loading":return(0,l.jsx)(m.Z,{});case"confirmed":return(0,l.jsx)(s,{data:a});case"error":return(0,l.jsx)(u.Z,{});default:throw new Error("Unexpected process state")}},v=()=>{const[e,s]=(0,c.useState)(null),{getCharacterByName:a,setProcess:r,process:i}=(0,t.Z)(),o=e=>{s(e)};return(0,l.jsx)(l.Fragment,{children:(0,l.jsxs)("div",{className:"char__search-form",children:[(0,l.jsx)(b.J9,{initialValues:{charName:""},validationSchema:N.Ry({charName:N.Z_().required("This field is required")}),onSubmit:e=>{let{charName:s}=e;(e=>{a(e).then(o).then((()=>r("confirmed")))})(s)},children:(0,l.jsxs)(b.l0,{children:[(0,l.jsx)("label",{className:"char__search-label",htmlFor:"charName",children:"Or find a character by name:"}),(0,l.jsxs)("div",{className:"char__search-wrapper",children:[(0,l.jsx)(b.gN,{id:"charName",name:"charName",type:"text",placeholder:"Enter name"}),(0,l.jsx)("button",{type:"submit",className:"button button__main",disabled:"loading"===i,children:(0,l.jsx)("div",{className:"inner",children:"find"})})]}),(0,l.jsx)(b.Bc,{component:"div",className:"char__search-error",name:"charName"})]})}),p(i,(e=>{let{data:s}=e;return console.log(s),s&&s.length>0?(0,l.jsxs)("div",{className:"char__search-wrapper",children:[(0,l.jsxs)("div",{className:"char__search-success",children:["There is! Visit ",s[0].name," page?"]}),(0,l.jsx)(n.rU,{to:"/characters/".concat(s[0].id),className:"button button__secondary",children:(0,l.jsx)("div",{className:"inner",children:"To page"})})]}):(0,l.jsx)("div",{className:"char__search-error",children:"The character was not found. Check the name and try again"})}),e)]})})};class f extends c.Component{constructor(){super(...arguments),this.state={error:!1}}componentDidCatch(e){console.log(e),this.setState({error:!0})}render(){return this.state.error?(0,l.jsx)(u.Z,{}):this.props.children}}const g=a.p+"static/media/mjolnir.61f31e1809f12183a524.png",y=e=>{let{data:s}=e;const{name:a,description:r,thumbnail:c,homepage:t,wiki:n}=s,i=-1!==c.indexOf("image_not_available.jpg")?{objectFit:"unset"}:{objectFit:"cover"};return(0,l.jsxs)("div",{className:"randomchar__block",children:[(0,l.jsx)("img",{src:c,alt:"Random character",className:"randomchar__img",style:i}),(0,l.jsxs)("div",{className:"randomchar__info",children:[(0,l.jsx)("p",{className:"randomchar__name",children:a}),(0,l.jsx)("p",{className:"randomchar__descr",children:r}),(0,l.jsxs)("div",{className:"randomchar__btns",children:[(0,l.jsx)("a",{href:t,className:"button button__main",children:(0,l.jsx)("div",{className:"inner",children:"homepage"})}),(0,l.jsx)("a",{href:n,className:"button button__secondary",children:(0,l.jsx)("div",{className:"inner",children:"Wiki"})})]})]})]})},k=()=>{const[e,s]=(0,c.useState)(null),{process:a,getCharacterById:r,setProcess:n}=(0,t.Z)();(0,c.useEffect)((()=>{d();const e=setInterval(d,6e4);return()=>{clearInterval(e)}}),[]);const o=e=>{s(e)},d=()=>{const e=Math.floor(400*Math.random()+1011e3);r(e).then(o).then((()=>n("confirmed")))};return(0,l.jsxs)("div",{className:"randomchar",children:[(0,i.Z)(a,y,e),(0,l.jsxs)("div",{className:"randomchar__static",children:[(0,l.jsxs)("p",{className:"randomchar__title",children:["Random character for today!",(0,l.jsx)("br",{}),"Do you want to get to know him better?"]}),(0,l.jsx)("p",{className:"randomchar__title",children:"Or choose another one"}),(0,l.jsx)("button",{className:"button button__main",children:(0,l.jsx)("div",{className:"inner",onClick:e=>{d()},children:"try it"})}),(0,l.jsx)("img",{src:g,alt:"mjolnir",className:"randomchar__decoration"})]})]})},w=()=>{const[e,s]=(0,r.useState)(null);return(0,l.jsxs)(l.Fragment,{children:[(0,l.jsx)(f,{children:(0,l.jsx)(k,{})}),(0,l.jsxs)("div",{className:"char__content",children:[(0,l.jsx)(f,{children:(0,l.jsx)(x,{onUpdateChar:e=>s(e)})}),(0,l.jsxs)("div",{children:[(0,l.jsx)(f,{children:(0,l.jsx)(h,{charId:e})}),(0,l.jsx)(f,{children:(0,l.jsx)(v,{})})]})]})]})}}}]);
//# sourceMappingURL=826.6e005678.chunk.js.map